---
services:
- type: web
  name: mcp
  runtime: go
  plan: standard
  scaling:
    minInstances: 1
    maxInstances: 3
    targetMemoryPercent: 60
  buildCommand: go build -tags netgo -ldflags '-s -w' -o app
  startCommand: ./app --transport http
  envVars:
  - key: REDIS_URL
    fromService:
      name: mcp-kv
      type: keyvalue
      property: connectionString
- type: keyvalue
  name: mcp-kv
  ipAllowList:
  - source: 0.0.0.0/0
    description: everywhere
